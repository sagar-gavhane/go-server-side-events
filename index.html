<!doctype html>
<html>
	<body>
		Mem: <span id="mem"></span><br />
		CPU: <span id="cpu"></span>
	</body>

	<script type="text/javascript">
        // Ref: https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events
		const eventSrc = new EventSource("http://127.0.0.1:8080/events");

		const mem = document.getElementById("mem");
		const cpu = document.getElementById("cpu");

		eventSrc.addEventListener("mem", (event) => {
			mem.textContent = event.data;
		});

		eventSrc.addEventListener("cpu", (event) => {
			cpu.textContent = event.data;
		});

		eventSrc.onerror = (err) => {
			console.log("sse error", err);
		};
	</script>
</html>